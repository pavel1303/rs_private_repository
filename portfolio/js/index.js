import i18Obj from "./translite.js";
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------Выпадающее меню---------------------------------------*/
/*--------------------------------------------------------------------------------------*/
const menu = document.querySelector('.burger');
const nav = document.querySelector('.navigation');

menu.addEventListener('click', showMenu);
nav.addEventListener('click', showMenu)

function showMenu() {
   nav.classList.toggle('active');
   menu.classList.toggle('active');
}

/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*----------------------------Смена картинок в портфолио--------------------------------*/
/*--------------------------------------------------------------------------------------*/
const portfBtns = document.querySelector('.portfolio__btns');

portfBtns.addEventListener('click', (event) => {
   let btn = event.target.closest('button');
   let season = btn.dataset.season;

   if (!btn) return;

   if (!portfBtns.contains(btn)) return;

   if (btn.nodeName === 'BUTTON') {
      portfBtns.querySelectorAll('button').forEach(btn => btn.classList.remove('chosen'));
      btn.classList.add('chosen');
      changeImage(season);
   }
})

function changeImage(season) {
   let gallary = document.querySelectorAll('.portfolio__gallary-item');
   gallary.forEach((img, i) => {
      img.src = `assets/img/${season}/${i + 1}.jpg`;
   })
}
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------Preloader для картинок--------------------------------*/
/*--------------------------------------------------------------------------------------*/

const seasons = ['winter', 'spring', 'summer', 'autumn'];

preloaderImages(seasons);

function preloaderImages(arr) {
   arr.forEach(el => {
      for (let i = 1; i <= 6; i++) {
         const img = new Image();
         img.src = `assets/img/${el}/${i}.jpg`;
      }
   })
}

/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*-----------------------------------Мультиязычность------------------------------------*/
/*--------------------------------------------------------------------------------------*/

const languages = document.querySelector('.language');

languages.addEventListener('click', (event) => {
   let actualLang = event.target.textContent;
   localStorage.setItem('lang', actualLang);
   changeLanguage(actualLang);
})

function changeLanguage(lang) {
   let words = document.querySelectorAll('[data-i18n]');
   languages.querySelectorAll('a').forEach(a => {
      if (a.textContent === lang) {
         a.classList.add('checked');
      } else {
         a.classList.remove('checked');
      }
   })

   words.forEach(word => word.textContent = `${i18Obj[lang][word.dataset.i18n]}`);
}
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------Работа с LocalStorage---------------------------------*/
/*--------------------------------------------------------------------------------------*/
function getLocalStorage() {
   if (localStorage.getItem('lang')) {
      const curLang = localStorage.getItem('lang');
      changeLanguage(curLang);
   }
   if (localStorage.getItem('theme')) {
      const curTheme = localStorage.getItem('theme');
      changeTheme(curTheme);
   }
}
window.addEventListener('load', getLocalStorage)
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*---------------------------------------Смена темы-------------------------------------*/
/*--------------------------------------------------------------------------------------*/
const elemForChange = document.querySelectorAll('[data-theme]');
const themeToggle = document.querySelector('.theme');
let actualTheme = 'dark';


themeToggle.addEventListener('click', () => {
   let arrTheme = ['dark', 'light'];
   let newTheme = arrTheme.filter(el => el != actualTheme).join();
   changeTheme(newTheme);
})

function changeTheme(theme) {
   const themeBtn = themeToggle.querySelector('use');
   themeBtn.dataset.themeToggle = theme;
   themeBtn.href.baseVal = `assets/svg/sprite.svg#${theme}`
   actualTheme = theme;
   localStorage.setItem('theme', actualTheme);
   if (actualTheme === 'light') {
      elemForChange.forEach(el => el.classList.add('sun-theme'));
   } else {
      elemForChange.forEach(el => el.classList.remove('sun-theme'));
   }

}
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*--------------------------------------------------------------------------------------*/
/*---------------------------------------Видео плеер-------------------------------------*/
/*--------------------------------------------------------------------------------------*/